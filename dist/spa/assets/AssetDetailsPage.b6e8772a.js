import{d as _,B as Q,_ as w,C as f,D as z,Q as v,E as Y,c as b,k as Z,r as d,w as $,n as x,h as y,U as ee,l as te,az as ne,K as h,L as m,aw as B,f as t,J as U,G as I,M as K,I as V,F,af as ie,X as S,H as G,aF as ae,aG as oe,aH as le}from"./index.2a6a9ab6.js";import{Q as se}from"./QPage.b8649a02.js";import{api as M}from"./axios.74a5b0c0.js";import{Q as de}from"./QBtnGroup.67fdf75e.js";import{d as ue,b as re,a as N,Q as pe,c as ge}from"./QCard.b7ff06d0.js";import{Q as ce}from"./QFile.a95b3066.js";import{C as me}from"./ClosePopup.6d7ece03.js";import"./uid.72e8e009.js";import"./format.963b118d.js";const fe=_({name:"PrimaryButton",setup(){return{router:Q()}},methods:{goBack(){this.$router.go(-1)}}});function Ie(e,n,o,r,p,s){return f(),z(v,{flat:"",dense:"",padding:"sm sm sm xs",label:"Regresar",size:"0.75rem",icon:"chevron_left",style:{"border-radius":"10px","text-transform":"capitalize"},onClick:e.goBack},null,8,["onClick"])}var he=w(fe,[["render",Ie]]);const ye=_({name:"SecondaryNavbarButton",props:{label:{type:String},active:{type:String}}});function ve(e,n,o,r,p,s){return f(),z(v,{label:e.label,class:"full-width",size:"0.9rem",align:"left",flat:"",padding:"sm md",style:Y({borderLeft:e.active==!0?"5px solid #1565c0":"5px solid #f5f5f5",textTransform:"capitalize",fontWeight:"normal"})},null,8,["label","style"])}var Ee=w(ye,[["render",ve]]);const be={ratio:[String,Number]};function Ue(e,n){return b(()=>{const o=Number(e.ratio||(n!==void 0?n.value:void 0));return isNaN(o)!==!0&&o>0?{paddingBottom:`${100/o}%`}:null})}const Ve=16/9;var L=Z({name:"QImg",props:{...be,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Ve},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:n,emit:o}){const r=d(e.initialRatio),p=Ue(e,r);let s=null,i=!1;const u=[d(null),d(D())],l=d(0),g=d(!1),c=d(!1),E=b(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),k=b(()=>({width:e.width,height:e.height})),P=b(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),H=b(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));$(()=>A(),T);function A(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function D(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function T(a){s!==null&&(clearTimeout(s),s=null),c.value=!1,a===null?(g.value=!1,u[l.value^1].value=D()):g.value=!0,u[l.value].value=a}function O({target:a}){i!==!0&&(s!==null&&(clearTimeout(s),s=null),r.value=a.naturalHeight===0?.5:a.naturalWidth/a.naturalHeight,j(a,1))}function j(a,q){i===!0||q===1e3||(a.complete===!0?W(a):s=setTimeout(()=>{s=null,j(a,q+1)},50))}function W(a){i!==!0&&(l.value=l.value^1,u[l.value].value=null,g.value=!1,c.value=!1,o("load",a.currentSrc||a.src))}function J(a){s!==null&&(clearTimeout(s),s=null),g.value=!1,c.value=!0,u[l.value].value=null,u[l.value^1].value=D(),o("error",a)}function R(a){const q=u[a].value,C={key:"img_"+a,class:P.value,style:H.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...q};return l.value===a?(C.class+=" q-img__image--waiting",Object.assign(C,{onLoad:O,onError:J})):C.class+=" q-img__image--loaded",y("div",{class:"q-img__container absolute-full",key:"img"+a},y("img",C))}function X(){return g.value!==!0?y("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},te(n[c.value===!0?"error":"default"])):y("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},n.loading!==void 0?n.loading():e.noSpinner===!0?void 0:[y(ne,{color:e.spinnerColor,size:e.spinnerSize})])}return T(A()),x(()=>{i=!0,s!==null&&(clearTimeout(s),s=null)}),()=>{const a=[];return p.value!==null&&a.push(y("div",{key:"filler",style:p.value})),c.value!==!0&&(u[0].value!==null&&a.push(R(0)),u[1].value!==null&&a.push(R(1))),a.push(y(ee,{name:"q-transition--fade"},X)),y("div",{class:E.value,style:k.value,role:"img","aria-label":e.alt},a)}}});const Se=_({name:"AssetInput",props:{label:{type:String},modelValue:{type:String},modelKey:{type:String},editing:{type:Boolean}},setup(e){const n=d(e.modelValue),o=d(e.modelKey),r=d(e.editing);return $(()=>e.modelValue,p=>{n.value=p}),$(()=>e.modelKey,p=>{o.value=p}),$(()=>e.editing,p=>{r.value=p}),{localValue:n,keyValue:o,isEditing:r}},methods:{toggleEditing(){this.$emit("update-editing",this.isEditing)},updateValue(){this.$emit("update-input",this.keyValue,this.localValue)}}}),$e={class:"flex justify-between items-center q-py-sm",style:{"border-bottom":"1px solid rgb(239, 239, 239)"}},_e={class:"q-pr-md text-grey-14",style:{width:"30%"}};function we(e,n,o,r,p,s){return f(),h("div",$e,[m("div",_e,B(e.label),1),t(ue,{modelValue:e.localValue,"onUpdate:modelValue":n[0]||(n[0]=i=>e.localValue=i),dense:"",borderless:"",readonly:!e.isEditing,onChange:e.updateValue,"input-style":"font-weight: 500;"},null,8,["modelValue","readonly","onChange"]),t(v,{icon:"edit",flat:"",round:"",size:"12px",color:e.isEditing?"primary":"black",onClick:e.toggleEditing},null,8,["color","onClick"])])}var ke=w(Se,[["render",we]]);const qe=_({name:"TechnologyDetails",props:{modelInfo:{type:Object}},components:{AssetInput:ke},data(){return{highlightedImageIndex:-1}},setup(e){const n=Q(),o=d(e.modelInfo),r=d(!1),p=d(!1),s=d();return console.log(o.value),{router:n,inputInfo:o,isEditing:r,isEditingImage:p,inputNewImage:s}},methods:{updateInputInfo(e,n){this.inputInfo[e]=n},updateEditing(e){this.isEditing=!e},saveAssetDetails(){console.log(this.inputInfo)},setNewDefaultImge(e){this.inputInfo.images.default_image=e;const n=this.inputInfo;console.log(n);try{M.patch(`./assets/update/${n._id}`,n).then(o=>{const r=o.data;r&&(this.inputInfo=r,this.isEditingImage=!1)}).catch(o=>{console.log(o)})}catch(o){console.log(o)}}}}),Ce=e=>(oe("data-v-1675955e"),e=e(),le(),e),Be={class:"row"},ze={class:"col-md-6 col-12 q-px-sm"},De={class:"row"},Ne={class:"col-md-12 col-12 flex justify-center text-center q-pb-sm items-start"},Ke={class:"col-md-12 col-12"},Qe={class:"col-md-6 col-12 q-px-sm"},Ae={key:0,class:"flex justify-end q-pt-lg"},Te=Ce(()=>m("div",{class:"text-h6"},"Imagenes",-1)),je=["onMouseenter","onClick"],Re={key:0,class:"image-circle-hover"};function Fe(e,n,o,r,p,s){var u;const i=U("AssetInput");return f(),h(F,null,[m("div",Be,[m("div",ze,[m("div",De,[m("div",Ne,[t(L,{class:"q-pa-md q-mx-sm",src:(u=e.inputInfo.images)==null?void 0:u.default_image,"spinner-color":"white",style:{height:"140px","max-width":"150px"}},null,8,["src"]),t(v,{icon:"edit",flat:"",round:"",size:"12px",color:e.isEditingImage?"primary":"black",onClick:n[0]||(n[0]=l=>e.isEditingImage=!0)},null,8,["color"])]),m("div",Ke,[t(i,{label:"Categoria",modelKey:"category",modelValue:e.inputInfo.category,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),t(i,{label:"Descripci\xF3n",modelKey:"description",modelValue:e.inputInfo.description,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),t(i,{label:"Fabricante",modelKey:"manufacturer",modelValue:e.inputInfo.manufacturer,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),t(i,{label:"Modelo",modelKey:"model",modelValue:e.inputInfo.model,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),t(i,{label:"Serial",modelKey:"serial_number",modelValue:e.inputInfo.serial_number,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),t(i,{label:"S/O",modelKey:"operating_system",modelValue:e.inputInfo.operating_system,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),t(i,{label:"RAM",modelKey:"ram",modelValue:e.inputInfo.ram,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"])])])]),m("div",Qe,[t(i,{label:"Costo",modelKey:"cost",modelValue:e.inputInfo.cost,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),t(i,{label:"Lugar de compra",modelKey:"purchase_from",modelValue:e.inputInfo.purchase_from,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),t(i,{label:"Fecha de compra",modelKey:"purchase_date",modelValue:e.inputInfo.purchase_date,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),t(i,{label:"Garantia",modelKey:"warranty_info",modelValue:e.inputInfo.warranty_info,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),t(i,{label:"Vencimiento de garantia",modelKey:"warranty_expiration_date",modelValue:e.inputInfo.warranty_expiration_date,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),t(i,{label:"Ubicaci\xF3n",modelKey:"location",modelValue:e.inputInfo.location,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),t(i,{label:"Ubicacion (informaci\xF3n extra)",modelKey:"location_extra_info",modelValue:e.inputInfo.location_extra_info,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),t(i,{label:"Empleado",modelKey:"current_employee",modelValue:e.inputInfo.current_employee,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),e.isEditing?(f(),h("div",Ae,[t(de,{flat:""},{default:I(()=>[t(v,{class:"q-ma-xs",label:"Guardar",color:"primary","icon-right":"save",size:"0.85rem",style:{"text-transform":"capitalize"}}),t(v,{class:"q-ma-xs",label:"Cancelar",flat:"",onClick:n[1]||(n[1]=l=>e.isEditing=!1),size:"0.85rem",style:{"text-transform":"capitalize"}})]),_:1})])):K("",!0)])]),t(ge,{modelValue:e.isEditingImage,"onUpdate:modelValue":n[4]||(n[4]=l=>e.isEditingImage=l)},{default:I(()=>[t(re,{class:"q-pa-md",style:{width:"550px"}},{default:I(()=>[t(N,null,{default:I(()=>[Te]),_:1}),t(N,{class:"q-pt-none"},{default:I(()=>[V(" Selecciona una imagen ")]),_:1}),t(N,{class:"flex justify-between items-center",style:{"max-height":"400px","overflow-y":"auto"}},{default:I(()=>{var l;return[(f(!0),h(F,null,ie((l=e.inputInfo.images)==null?void 0:l.all,(g,c)=>G((f(),h("div",{key:c,style:{cursor:"pointer",position:"relative"},onMouseenter:E=>e.highlightedImageIndex=c,onMouseleave:n[2]||(n[2]=E=>e.highlightedImageIndex=-1),onClick:E=>e.setNewDefaultImge(g)},[t(L,{class:"q-pa-md q-ma-sm",src:g,"spinner-color":"white",style:{height:"120px",width:"140px"}},null,8,["src"]),e.highlightedImageIndex===c?(f(),h("div",Re)):K("",!0)],40,je)),[[ae]])),128))]}),_:1}),t(pe,{align:"right"},{default:I(()=>[t(ce,{modelValue:e.inputNewImage,"onUpdate:modelValue":n[3]||(n[3]=l=>e.inputNewImage=l),label:"Subir nueva imagen",outlined:"",rounded:"",dense:"",clearable:"",accept:".jpg, image/*",class:"q-mx-md","label-color":"primary",color:"primary",style:{"text-transform":"none","font-size":"12px",height:"fit-content"}},{prepend:I(()=>[t(S,{name:"cloud_upload",color:"primary"})]),_:1},8,["modelValue"]),G(t(v,{label:"Cancelar",color:"black",flat:"",rounded:"",size:"0.85rem",padding:"sm md",style:{"text-transform":"capitalize"}},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var Ge=w(qe,[["render",Fe],["__scopeId","data-v-1675955e"]]);const Le=_({name:"AssetDetailsPage",components:{GoBackButton:he,SecondaryNavbarButton:Ee,TechnologyDetails:Ge},setup(){const e=Q(),n=d(e.params.id),o=d("details"),r=d(!0),p=d(!1),s=d({}),i=d(!1);$(n,(l,g)=>{u(l)});function u(l){try{M.get(`./assets/${l}`).then(g=>{const c=g.data;c&&(s.value=c,i.value=!0,console.log(c))}).catch(g=>{console.log(g)})}catch(g){console.log(g)}}return u(n.value),{router:e,idAsset:n,getAssetDetails:u,assetInfo:s,activeDetails:r,activeActions:p,detailsLoaded:i,actualSection:o}}}),Me={class:"col-3 bg-grey-2 flex",style:{"border-radius":"12px","flex-direction":"column"}},Pe={class:"q-pa-md"},He={class:"flex justify-between"},Oe={class:"text-h6 q-pr-md"},We={key:0},Je={key:1},Xe={key:2},Ye={key:3},Ze={class:"text-grey-14"},xe={class:"q-py-lg"},et={class:"q-pa-md",style:{"margin-top":"auto"}},tt={class:"col-9 q-px-lg",style:{"overflow-y":"auto"}};function nt(e,n,o,r,p,s){const i=U("GoBackButton"),u=U("q-section"),l=U("SecondaryNavbarButton"),g=U("TechnologyDetails");return f(),z(se,null,{default:I(()=>[t(u,{class:"flex justify-between q-pa-md"},{default:I(()=>[t(i)]),_:1}),t(u,{class:"flex row q-px-md",style:{height:"70vh"}},{default:I(()=>{var c,E,k;return[m("div",Me,[m("div",Pe,[m("div",He,[m("div",Oe,B(e.assetInfo.category)+" "+B(e.assetInfo.model),1),((c=e.assetInfo.status)==null?void 0:c.name)=="Active"?(f(),h("div",We,[t(S,{name:"circle",color:"green"}),V(" Activo")])):((E=e.assetInfo.status)==null?void 0:E.name)=="Inactive"?(f(),h("div",Je,[t(S,{name:"circle",color:"orange"}),V(" Inactivo ")])):((k=e.assetInfo.status)==null?void 0:k.name)=="Broken"?(f(),h("div",Xe,[t(S,{name:"circle",color:"red"}),V(" Roto")])):(f(),h("div",Ye,[t(S,{name:"circle",color:"black"}),V(" Sin definir")]))]),m("div",Ze,"#"+B(e.assetInfo.serial_number),1)]),m("div",xe,[t(l,{label:"Detalles",active:e.activeDetails},null,8,["active"]),t(l,{label:"Acciones",active:e.activeActions},null,8,["active"]),t(l,{label:"Imagenes y Videos",active:!1})]),m("div",et,[t(v,{label:"Borrar",icon:"delete",color:"red",outline:"",class:"full-width"})])]),m("div",tt,[e.detailsLoaded?(f(),z(g,{key:0,modelInfo:e.assetInfo},null,8,["modelInfo"])):K("",!0)])]}),_:1})]),_:1})}var gt=w(Le,[["render",nt]]);export{gt as default};
