import{Q as $}from"./QBtnGroup.67fdf75e.js";import{Q as N}from"./QPage.b8649a02.js";import{api as I}from"./axios.74a5b0c0.js";import{u as P,Q as q,a as S,b as B,P as T,F as R,c as z}from"./QTable.8a3ed3f3.js";import{u as F,P as E}from"./use-quasar.7f376fa1.js";import{d as y,B as M,r as c,w as A,_ as k,C as d,D,G as s,f as a,K as p,X as h,I as v,Q as _,J as f,L as w,F as U,af as O,M as x}from"./index.2a6a9ab6.js";import{Q as V,a as Q,b as G,c as j,d as L}from"./QCard.b7ff06d0.js";import{Q as J}from"./QFile.a95b3066.js";import"./QBtnDropdown.a6b63d2c.js";import"./uid.72e8e009.js";import"./position-engine.b5a907da.js";import"./format.963b118d.js";const K=y({name:"AssetDetailsTable",props:{rows:{type:Array},columns:{type:Array},loading:{type:Boolean}},setup(e){const n=M(),g=c(e.rows);A(()=>e.rows,t=>{g.value=t,g.value.forEach((o,r)=>{o.index=r+1})});const u=P(),i=c(u.getView);A(()=>u.getView,t=>{console.log(t),i.value=t,m()});function m(){i.value.value&&(console.log(i.value.value),$emit("reloadData"))}return{route:n,viewStore:u,viewConfig:i,setTableView:m,pagination:c({rowsPerPage:0})}},methods:{redirectToAsset(e){this.$router.push({path:`inventario/${e}`})}}}),W={key:0,class:""},X={key:1,class:""},H={key:2,class:""},Y={key:3,class:""};function Z(e,n,g,u,i,m){return d(),D(S,{flat:"",bordered:"",rows:e.rows,columns:e.columns,loading:e.loading,"row-key":"name","table-header-style":"font-weight: 100;",class:"q-pt-md","no-data-label":"No se encontraron datos",style:{height:"66vh","max-height":"66vh"}},{"body-cell-status":s(t=>[a(q,null,{default:s(()=>[t.row.status==="Activo"?(d(),p("div",W,[a(h,{name:"circle",color:"green"}),v(" Activo")])):t.row.status==="Inactivo"?(d(),p("div",X,[a(h,{name:"circle",color:"orange"}),v(" Inactivo")])):t.row.status==="Roto"?(d(),p("div",H,[a(h,{name:"circle",color:"red"}),v(" Roto")])):(d(),p("div",Y,[a(h,{name:"circle",color:"black"}),v(" Sin definir")]))]),_:2},1024)]),"body-cell-actions":s(t=>[a(q,null,{default:s(()=>[a(_,{label:"Ver mas","icon-right":"navigate_next",color:"dark",outline:"",size:"0.75rem",style:{"border-radius":"10px","text-transform":"capitalize"},onClick:o=>e.redirectToAsset(t.row._id)},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows","columns","loading"])}var ee=k(K,[["render",Z]]);const ae=y({name:"DialogNewAsset",setup(){F();const e=c(!1),n=c({}),g=c([]),u=c([]),i=c([]);A(()=>n.value.category,t=>{console.log(t);const o=g.value.filter(r=>r.name===t);i.value=o[0].properties});function m(){try{I.get("./categories").then(t=>{const o=t.data;o.length>0&&(g.value=o,u.value=o.map(r=>r.name))}).catch(t=>{console.log(t)})}catch(t){console.log(t)}}return{dialogState:e,categoriesOptions:u,propertiesOptions:i,inputInfo:n,getAllCategories:m}},methods:{openDialog(){this.dialogState=!0,this.getAllCategories()},closeDialog(){this.dialogState=!1,this.inputInfo={}},addAsset(){console.log(this.inputInfo)}}}),te=w("div",{class:"text-h5 text-weight-medium"},"Nuevo Producto",-1),oe={class:"q-mb-lg"},le={class:"q-pa-md bg-grey-12 rounded-borders"},se=w("div",{class:"q-pb-xs"},"Selecciona una categoria para comenzar",-1),ne={key:0,class:"q-pa-md"};function ie(e,n,g,u,i,m){const t=f("q-title");return d(),D(j,{modelValue:e.dialogState,"onUpdate:modelValue":n[2]||(n[2]=o=>e.dialogState=o),persistent:""},{default:s(()=>[a(G,{class:"q-pa-md",style:{width:"700px","max-width":"80vw","max-height":"80vh"}},{default:s(()=>[a(V,{align:"right",class:"q-py-none"},{default:s(()=>[a(_,{icon:"close",color:"black",flat:"",round:"",onClick:e.closeDialog,class:"q-py-none"},null,8,["onClick"])]),_:1}),a(Q,{class:"q-pt-none q-pb-sm"},{default:s(()=>[te]),_:1}),a(Q,null,{default:s(()=>[w("div",oe,[a(t,{class:"text-subtitle2 text-weight-regular"},{default:s(()=>[v("Completa los siguientes campos. En caso de que no aplique puede dejar el campo en blanco.")]),_:1})]),w("div",le,[se,a(B,{clearable:"",dense:"",modelValue:e.inputInfo.category,"onUpdate:modelValue":n[0]||(n[0]=o=>e.inputInfo.category=o),options:e.categoriesOptions,label:"Categoria",class:"q-mb-md"},null,8,["modelValue","options"])]),e.inputInfo.category?(d(),p("div",ne,[a(J,{dense:"",modelValue:e.inputInfo.images,"onUpdate:modelValue":n[1]||(n[1]=o=>e.inputInfo.images=o),label:"Imagenes","use-chips":"",multiple:"",class:"q-mb-md",accept:".jpg, image/*",hint:"opcional"},null,8,["modelValue"]),(d(!0),p(U,null,O(e.propertiesOptions,(o,r)=>(d(),p("div",{key:r},[a(L,{clearable:"",dense:"",modelValue:e.inputInfo[o.key],"onUpdate:modelValue":l=>e.inputInfo[o.key]=l,label:o.name,class:"q-mb-md",hint:"requerido",rules:[l=>!!l||"requerido"]},null,8,["modelValue","onUpdate:modelValue","label","rules"])]))),128))])):x("",!0)]),_:1}),a(V,{align:"right"},{default:s(()=>[a(_,{label:"Agregar",size:"0.85rem",color:"primary",dense:"",outline:"",padding:"sm lg",onClick:e.addAsset,style:{"border-radius":"10px","text-transform":"capitalize"}},null,8,["onClick"]),a(_,{label:"Cancelar",size:"0.85rem",flat:"",dense:"",outline:"",onClick:e.closeDialog,padding:"sm lg",style:{"border-radius":"10px","text-transform":"capitalize"}},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var re=k(ae,[["render",ie]]);const ce=y({name:"AssetsPage",components:{PageTitle:E,PrimaryButton:T,FilterBar:R,AssetDetailsTable:ee,DialogNewAsset:re},setup(){const e=c(n());function n(){const l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),b=window.innerWidth<768;return l||b}window.addEventListener("resize",()=>{e.value=n()});const g=c(!1),u=[{name:"index",label:"#",field:"index"},{name:"category",label:"Categoria",field:"category",align:"left"},{name:"description",label:"Descripcion",field:"description",align:"left"},{name:"manufacturer",label:"Fabricante",field:"manufacturer",align:"left"},{name:"model",label:"Modelo",field:"model",align:"left"},{name:"serial_number",label:"Serial",field:"serial_number",align:"left"},{name:"location",label:"Ubicacion",field:"location",align:"left"},{name:"location_extra_info",label:"",field:"location_extra_info",align:"left"},{name:"current_employee",label:"Empleado",field:"current_employee",align:"left"},{name:"status",label:"Estado",field:"status",align:"left"},{name:"actions",label:"",align:"left"}],i=c([]),m=c(!1),t=z();o();function o(){m.value=!0;try{I.get("./assets").then(l=>{const b=l.data;b.length>0&&r(b)}).catch(l=>{console.log(l)})}catch(l){console.log(l)}}function r(l=null){l!==null&&t.setDataApi(l),i.value=t.getDataApi,m.value=!1}return{isMobile:e,assetColumns:u,assetRows:i,loadingState:m,stateDialogNewAsset:g,dataApiStore:t,getAllAssets:o,setAssets:r}},methods:{activateDialogNewAsset(){this.$refs.dialogNewAssetRef.openDialog()}}}),de={key:0},ue={key:1};function me(e,n,g,u,i,m){const t=f("PageTitle"),o=f("PrimaryButton"),r=f("DialogNewAsset"),l=f("q-section"),b=f("FilterBar"),C=f("AssetDetailsTable");return d(),D(N,null,{default:s(()=>[a(l,{class:"flex justify-between q-pa-md"},{default:s(()=>[a(t,{label:"Inventario"}),e.isMobile?(d(),p("div",de,[a($,{flat:""},{default:s(()=>[a(o,{flat:"",icon:"add",onClick:e.activateDialogNewAsset},null,8,["onClick"]),a(r,{ref:"dialogNewAssetRef"},null,512),a(o,{flat:"",icon:"more_vert"})]),_:1})])):(d(),p("div",ue,[a($,{flat:""},{default:s(()=>[a(o,{label:"Agregar Nuevo",icon:"add",class:"q-mx-sm",onClick:e.activateDialogNewAsset},null,8,["onClick"]),a(r,{ref:"dialogNewAssetRef"},null,512),a(o,{flat:"",icon:"more_vert",class:"q-mx-sm"})]),_:1})]))]),_:1}),a(l,null,{default:s(()=>[a(b,{onGetAllData:e.getAllAssets,onRealodData:e.setAssets},null,8,["onGetAllData","onRealodData"])]),_:1}),a(l,null,{default:s(()=>[a(C,{columns:e.assetColumns,rows:e.assetRows,loading:e.loadingState,onReloadData:e.setAssets},null,8,["columns","rows","loading","onReloadData"])]),_:1})]),_:1})}var Ce=k(ce,[["render",me]]);export{Ce as default};
