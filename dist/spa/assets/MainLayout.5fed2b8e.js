import{k as V,c as y,h as C,l as G,i as X,m as k,r as q,w as P,n as ie,p as ne,q as Z,g as ee,s as se,t as le,u as re,v as ue,d as U,x as I,_ as D,y as f,z as p,A as H,B as S,Q as N,C as i,f as o,D as de,E as M,G as Q,H as ce,I as fe,J as L,K as $,L as z,F as j,M as F,N as g,O as W}from"./index.d76d729d.js";import{Q as me,a as ge}from"./QLayout.137efbba.js";import{Q as E,a as pe,b as T,c as h,P as ve,d as be,e as Y,f as he}from"./PrimaryButton.ed2de242.js";import{Q as ye}from"./QTooltip.e068c045.js";import{api as A}from"./axios.d5763ff0.js";import{Q as qe}from"./QBtnDropdown.f3e529f4.js";import{C as xe}from"./ClosePopup.88557c7d.js";import"./uid.55d387d1.js";import"./use-dark.dd39b0a6.js";var O=V({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:t}){const r=y(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>C("div",{class:r.value,role:"toolbar"},G(t.default))}}),J=V({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:t,emit:r}){const{proxy:{$q:l}}=ee(),a=X(Z,k);if(a===k)return console.error("QHeader needs to be child of QLayout"),k;const u=q(parseInt(e.heightHint,10)),d=q(!0),c=y(()=>e.reveal===!0||a.view.value.indexOf("H")>-1||l.platform.is.ios&&a.isContainer.value===!0),v=y(()=>{if(e.modelValue!==!0)return 0;if(c.value===!0)return d.value===!0?u.value:0;const n=u.value-a.scroll.value.position;return n>0?n:0}),_=y(()=>e.modelValue!==!0||c.value===!0&&d.value!==!0),s=y(()=>e.modelValue===!0&&_.value===!0&&e.reveal===!0),x=y(()=>"q-header q-layout__section--marginal "+(c.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(_.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),B=y(()=>{const n=a.rows.value.top,w={};return n[0]==="l"&&a.left.space===!0&&(w[l.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),n[2]==="r"&&a.right.space===!0&&(w[l.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),w});function m(n,w){a.update("header",n,w)}function b(n,w){n.value!==w&&(n.value=w)}function oe({height:n}){b(u,n),m("size",n)}function ae(n){s.value===!0&&b(d,!0),r("focusin",n)}P(()=>e.modelValue,n=>{m("space",n),b(d,!0),a.animate()}),P(v,n=>{m("offset",n)}),P(()=>e.reveal,n=>{n===!1&&b(d,e.modelValue)}),P(d,n=>{a.animate(),r("reveal",n)}),P(a.scroll,n=>{e.reveal===!0&&b(d,n.direction==="up"||n.position<=e.revealOffset||n.position-n.inflectionPoint<100)});const R={};return a.instances.header=R,e.modelValue===!0&&m("size",u.value),m("space",e.modelValue),m("offset",v.value),ie(()=>{a.instances.header===R&&(a.instances.header=void 0,m("size",0),m("offset",0),m("space",!1))}),()=>{const n=ne(t.default,[]);return e.elevated===!0&&n.push(C("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),n.push(C(me,{debounce:0,onResize:oe})),C("header",{class:x.value,style:B.value,onFocusin:ae},n)}}});const we=["top","middle","bottom"];var K=V({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>we.includes(e)}},setup(e,{slots:t}){const r=y(()=>e.align!==void 0?{verticalAlign:e.align}:null),l=y(()=>{const a=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(a!==void 0?` text-${a}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>C("div",{class:l.value,style:r.value,role:"status","aria-label":e.label},se(t.default,e.label!==void 0?[e.label]:[]))}}),$e=V({name:"QPageContainer",setup(e,{slots:t}){const{proxy:{$q:r}}=ee(),l=X(Z,k);if(l===k)return console.error("QPageContainer needs to be child of QLayout"),k;le(re,!0);const a=y(()=>{const u={};return l.header.space===!0&&(u.paddingTop=`${l.header.size}px`),l.right.space===!0&&(u[`padding${r.lang.rtl===!0?"Left":"Right"}`]=`${l.right.size}px`),l.footer.space===!0&&(u.paddingBottom=`${l.footer.size}px`),l.left.space===!0&&(u[`padding${r.lang.rtl===!0?"Right":"Left"}`]=`${l.left.size}px`),u});return()=>C("div",{class:"q-page-container",style:a.value},G(t.default))}});const Ne=ue("notificationStore",{state:()=>({data:null}),getters:{getNotification(e){return e.data}},actions:{setNotification(e){this.data=e},clearNotification(){this.data=null}}}),_e=U({name:"NavbarButton",setup(){const e=q(t());function t(){const l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),a=window.innerWidth<768;return l||a}return window.addEventListener("resize",()=>{e.value=t()}),{route:I(),isMobile:e}},computed:{active(){return this.route.name===this.toPage||this.route.name==="asset-details-page"&&this.toPage==="assets-page"}},methods:{redirectToPage(e){this.$router.push({name:e})}},props:{label:{type:String},icon:{type:String},toPage:{type:String}}});function Be(e,t,r,l,a,u){return f(),p(N,{label:e.label,icon:e.icon,class:H("q-mx-xs q-px-lg "+(e.isMobile?"full-width":"")),align:"left",size:"0.9rem",flat:"",style:S({borderBottom:!e.isMobile&&e.active?"3px solid #1565c0":"",color:e.isMobile&&e.active?"#1565c0":"#e0e0e0",textTransform:"capitalize",borderRadius:"7px 7px 2px 2px"}),onClick:t[0]||(t[0]=d=>e.redirectToPage(e.toPage))},null,8,["label","icon","class","style"])}var Se=D(_e,[["render",Be]]);const Ce=U({name:"NavbarButtonDropdown",setup(){const e=q(t());function t(){const l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),a=window.innerWidth<768;return l||a}return window.addEventListener("resize",()=>{e.value=t()}),{route:I(),isMobile:e}},computed:{active(){return this.route.name===this.toPage||this.route.name==="asset-details-page"&&this.toPage==="assets-page"||this.route.name==="cards-page"}},methods:{redirectToPage(e){this.$router.push({name:e})}},props:{label:{type:String},icon:{type:String}}});function ke(e,t,r,l,a,u){return f(),p(qe,{label:e.label,icon:e.icon,class:H("q-mx-xs q-px-lg "+(e.isMobile?"full-width":"")),align:"left",size:"0.9rem",style:S({borderBottom:!e.isMobile&&e.active?"3px solid #1565c0":"",color:e.isMobile&&e.active?"#1565c0":"#e0e0e0",textTransform:"capitalize",borderRadius:"7px 7px 2px 2px"})},{default:i(()=>[o(h,null,{default:i(()=>[de((f(),p(E,{clickable:"",onClick:t[0]||(t[0]=d=>e.redirectToPage("cards-page"))},{default:i(()=>[o(pe,null,{default:i(()=>[o(T,null,{default:i(()=>[M("Registro de tarjetas")]),_:1})]),_:1})]),_:1})),[[xe]])]),_:1})]),_:1},8,["label","icon","class","style"])}var Pe=D(Ce,[["render",ke]]);const ze=U({name:"LogoutButton",props:{label:{String}},components:{PrimaryButton:ve},setup(){const e=q(t());function t(){const l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),a=window.innerWidth<768;return l||a}return window.addEventListener("resize",()=>{e.value=t()}),{router:I(),isMobile:e}},methods:{logout(){console.log("Saliendo ...")}}});function Me(e,t,r,l,a,u){const d=Q("PrimaryButton");return f(),p(d,{label:"Cerrar sesion",icon:"logout",size:"0.7rem",style:{"border-radius":"7px","text-transform":"none"}})}var Qe=D(ze,[["render",Me]]),te="/assets/masterbrand-logo.b0e623c8.webp";const Le=U({name:"MainLayout",components:{NavbarButton:Se,NavbarButtonDropdown:Pe,LogoutButton:Qe},setup(e,{emit:t}){const r=ce(),l=I(),a=fe(),u=q(d());function d(){const B=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),m=window.innerWidth<768;return B||m}window.addEventListener("resize",()=>{u.value=d()});const c=q(!1),v=Ne(),_=q(0),s=q([]);x();function x(){v.getNotification&&v.clearNotification();const B=a.getUser;A.get(`./notifications/unreaded/${B.id}`).then(m=>{const b=m.data;v.setNotification(b),s.value=b,_.value=b.length}).catch(m=>{console.log(m)})}return{isMobile:u,menuState:c,userStore:a,router:r,route:l,getAllNotifications:x,notifications:s,quantityNotifications:_,notificationStore:v}},methods:{handleEventUpdateNotifications(){setTimeout(()=>{this.notificationStore.getNotification&&this.notificationStore.clearNotification();const e=this.userStore.getUser;A.get(`./notifications/unreaded/${e.id}`).then(t=>{const r=t.data;this.notificationStore.setNotification(r),this.notifications=r,this.quantityNotifications=r.length}).catch(t=>{console.log(t)})},1e3)},getNameUserStore(){return this.userStore.getUser.username?this.userStore.getUser.username:"Undefinido"},logout(){this.userStore.clearUser,this.$q.notify({spinner:!0,message:"Cerrando sesion",timeout:500,onDismiss:()=>this.router.push({name:"login-page"})})},defineImportanceColor(e){return e==="high"?"red":e==="medium"?"#F2C037":(e==="normal","black")},markNotification(e){A.post(`./notifications/mark/${e}`,{administrator:this.userStore.getUser.id}).then(t=>{t.data.message==="Correctly done"&&this.getAllNotifications()}).catch(t=>{console.log(t)})},formatDate(e){return be.formatDate(e,"DD/MMMM/YYYY - HH:mm",{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]})}}}),Ve=g("img",{src:te,style:{"max-height":"30px"}},null,-1),Ue=g("img",{src:te,style:{"max-height":"30px","max-width":"70%"}},null,-1),Ie={key:0},De=g("div",{class:"q-px-lg q-py-md text-h6",style:{"border-bottom":"1px solid rgb(239, 239, 239)"}},"Notificaciones ",-1),Ae={class:"q-mx-md"},Oe={class:"full-width q-pt-xs text-grey-14",style:{"font-size":"11px"}},Ee={class:"full-width q-pt-sm",style:{"font-size":"13px"}},Te={key:1,class:"q-mr-md"},He={class:"bg-grey-10"},Re={class:"flex justify-between q-ma-sm"},je=g("div",{class:"q-px-lg q-py-md text-h6",style:{"border-bottom":"1px solid rgb(239, 239, 239)"}}," Notificaciones ",-1),Fe={class:"q-mx-md"},We={class:"full-width q-pt-xs text-grey-14",style:{"font-size":"11px"}},Ye={class:"full-width q-pt-sm",style:{"font-size":"13px"}};function Je(e,t,r,l,a,u){const d=Q("LogoutButton"),c=Q("NavbarButton"),v=Q("NavbarButtonDropdown"),_=Q("router-view");return f(),p(ge,{view:"lHh Lpr lFf"},{default:i(()=>[e.route.name==="admins-page"?(f(),p(J,{key:0,class:"bg-grey-10"},{default:i(()=>[o(O,{class:"q-ma-sm q-mx-md flex justify-between"},{default:i(()=>[Ve,o(d,{class:"q-mr-lg",label:e.getNameUserStore(),onClick:t[0]||(t[0]=s=>e.logout())},null,8,["label"])]),_:1})]),_:1})):(f(),p(J,{key:1,class:"bg-grey-10"},{default:i(()=>[o(O,{class:"q-ma-sm q-mx-md flex justify-between"},{default:i(()=>[Ue,e.isMobile?z("",!0):(f(),L("div",Ie,[o(N,{icon:e.quantityNotifications?"notifications":"notifications_none",round:"",class:"q-mx-md",style:{"border-radius":"20px"},onClick:t[1]||(t[1]=s=>e.getAllNotifications())},{default:i(()=>[e.quantityNotifications?(f(),p(K,{key:0,color:"red",floating:""},{default:i(()=>[M($(e.quantityNotifications),1)]),_:1})):z("",!0),o(Y,{style:{width:"400px","overflow-y":"auto"}},{default:i(()=>[De,(f(!0),L(j,null,F(e.notifications,(s,x)=>(f(),p(h,{key:x+1},{default:i(()=>[o(E,{class:"q-pa-lg flex justify-center items-center",clickable:"",onClick:B=>e.markNotification(s._id),style:{"border-bottom":"1px solid rgb(239, 239, 239)"}},{default:i(()=>[o(W,{name:s.icon,size:"36px",style:S({color:e.defineImportanceColor(s.importance)})},null,8,["name","style"]),g("div",Ae,[o(T,{style:S({fontWeight:500,fontSize:"15px",color:e.defineImportanceColor(s.importance)})},{default:i(()=>[M($(s.name),1)]),_:2},1032,["style"]),g("div",Oe,$(e.formatDate(s.created_at)),1),g("div",Ee,$(s.description),1)]),o(N,{icon:"close",size:"12px",flat:"",round:"",dense:""})]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1},8,["icon"]),o(d,{class:"q-mr-lg",label:e.getNameUserStore(),onClick:t[2]||(t[2]=s=>e.logout())},null,8,["label"])])),e.isMobile?(f(),L("div",Te,[g("div",null,[o(N,{class:"q-mx-xs",icon:"menu",size:"13px",flat:"",rounded:"",onClick:t[3]||(t[3]=s=>e.menuState=!0)})]),o(ye,{modelValue:e.menuState,"onUpdate:modelValue":t[7]||(t[7]=s=>e.menuState=s),class:"menu-bar",position:"left","transition-show":"slide-right","transition-hide":"slide-left",maximized:""},{default:i(()=>[g("div",He,[g("div",Re,[o(N,{icon:e.quantityNotifications?"notifications":"notifications_none",round:"",class:"q-mx-lg",style:{"border-radius":"20px",color:"white"},onClick:t[4]||(t[4]=s=>e.getAllNotifications())},{default:i(()=>[e.quantityNotifications?(f(),p(K,{key:0,color:"red",floating:""},{default:i(()=>[M($(e.quantityNotifications),1)]),_:1})):z("",!0),o(Y,{style:{width:"400px","max-height":"72vh","overflow-y":"auto"}},{default:i(()=>[je,(f(!0),L(j,null,F(e.notifications,(s,x)=>(f(),p(h,{key:x+1},{default:i(()=>[o(E,{class:"q-pa-lg flex justify-center items-center",clickable:"",onClick:B=>e.markNotification(s._id),style:{"border-bottom":"1px solid rgb(239, 239, 239)"}},{default:i(()=>[o(W,{name:s.icon,size:"36px",style:S({color:e.defineImportanceColor(s.importance)})},null,8,["name","style"]),g("div",Fe,[o(T,{style:S({fontWeight:500,fontSize:"15px",color:e.defineImportanceColor(s.importance)})},{default:i(()=>[M($(s.name),1)]),_:2},1032,["style"]),g("div",We,$(e.formatDate(s.created_at)),1),g("div",Ye,$(s.description),1)]),o(N,{icon:"close",size:"12px",flat:"",round:"",dense:""})]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1},8,["icon"]),o(N,{icon:"close",size:"14px",class:"q-pa-sm",color:"white",flat:"",round:"",onClick:t[5]||(t[5]=s=>e.menuState=!1)})]),o(h,{class:"q-px-lg q-py-sm"},{default:i(()=>[o(c,{label:"Inicio",icon:"home",toPage:"home-page"})]),_:1}),o(h,{class:"q-px-lg q-py-sm"},{default:i(()=>[o(c,{label:"Inventario",icon:"inventory",toPage:"assets-page"})]),_:1}),o(h,{class:"q-px-lg q-py-sm"},{default:i(()=>[o(c,{label:"Toners",icon:"inventory",toPage:"toners-page"})]),_:1}),o(h,{class:"q-px-lg q-py-sm"},{default:i(()=>[o(c,{label:"Categorias",icon:"bookmark",toPage:"categories-page"})]),_:1}),o(h,{class:"q-px-lg q-py-sm"},{default:i(()=>[o(c,{label:"Ubicaciones",icon:"place",toPage:"locations-page"})]),_:1}),o(h,{class:"q-px-lg q-py-sm"},{default:i(()=>[o(v,{label:"Herramientas",icon:"hardware",flat:""})]),_:1}),o(h,{class:"q-px-lg q-py-sm flex justify-center",style:{"margin-top":"42vh"}},{default:i(()=>[o(N,{label:"Cerrar sesion",icon:"logout",size:"0.9rem",color:"grey-4",class:"q-mx-xs q-px-lg",flat:"",style:{"text-transform":"none"},onClick:t[6]||(t[6]=s=>e.logout())})]),_:1})])]),_:1},8,["modelValue"])])):z("",!0)]),_:1}),e.isMobile?z("",!0):(f(),p(O,{key:0,class:"justify-center q-px-md",inset:""},{default:i(()=>[o(he,null,{default:i(()=>[o(c,{label:"Inicio",toPage:"home-page"}),o(c,{label:"Inventario",toPage:"assets-page"}),o(c,{label:"Toners",toPage:"toners-page"}),o(c,{label:"Categorias",toPage:"categories-page"}),o(c,{label:"Ubicaciones",toPage:"locations-page"}),o(v,{label:"Herramientas"})]),_:1})]),_:1}))]),_:1})),o($e,{class:"bg-grey-10",style:{height:"100vh"}},{default:i(()=>[o(_,{onUpdateNotifications:e.handleEventUpdateNotifications,class:H(e.isMobile?"bg-white q-mb-md q-mx-xs":"bg-white q-mb-md q-mx-md"),style:{"min-height":"98%",height:"98%","border-radius":"15px"}},null,8,["onUpdateNotifications","class"])]),_:1})]),_:1})}var nt=D(Le,[["render",Je]]);export{nt as default};
