import{Q as V}from"./focusout.4d39a5e0.js";import{Q as N}from"./QPage.2d12e148.js";import{api as $}from"./axios.ec8fbb89.js";import{Q as k,a as B,b as P,P as S,F as T,u as x}from"./QTable.88e9499b.js";import{u as F,P as z}from"./use-quasar.94af6e77.js";import{d as y,B as R,r as u,w as D,_ as A,C as d,D as w,G as l,f as a,ad as f,a9 as b,I as _,Q as h,J as g,K as v,F as U,ae as E,af as O}from"./index.fc1c8868.js";import{Q as C,a as j}from"./QCardActions.cbbe8b0d.js";import{Q as q,a as G,b as J}from"./QCard.dad260fe.js";import{Q as K}from"./QFile.5136a79b.js";import"./uid.94333c10.js";import"./QBtnDropdown.11822bdf.js";const L=y({name:"AssetDetailsTable",props:{rows:{type:Array},columns:{type:Array}},setup(e){const s=R(),r=u(e.rows);return D(()=>e.rows,n=>{r.value=n,r.value.forEach((c,i)=>{c.index=i+1})}),{route:s,pagination:u({rowsPerPage:0})}},methods:{redirectToAsset(e){this.$router.push({path:`inventario/${e}`})}}}),M={key:0,class:""},H={key:1,class:""},W={key:2,class:""},X={key:3,class:""};function Y(e,s,r,n,c,i){return d(),w(B,{flat:"",bordered:"",rows:e.rows,columns:e.columns,"row-key":"name","table-header-style":"font-weight: 100;",class:"q-pt-md","no-data-label":"No se encontraron datos",style:{height:"66vh","max-height":"66vh"}},{"body-cell-status":l(t=>[a(k,null,{default:l(()=>[t.row.status==="Active"?(d(),f("div",M,[a(b,{name:"circle",color:"green"}),_(" Activo")])):t.row.status==="Inactive"?(d(),f("div",H,[a(b,{name:"circle",color:"orange"}),_(" Inactivo")])):t.row.status==="Broken"?(d(),f("div",W,[a(b,{name:"circle",color:"red"}),_(" Roto")])):(d(),f("div",X,[a(b,{name:"circle",color:"black"}),_(" Sin definir")]))]),_:2},1024)]),"body-cell-actions":l(t=>[a(k,null,{default:l(()=>[a(h,{label:"Ver mas","icon-right":"navigate_next",color:"dark",outline:"",size:"0.75rem",style:{"border-radius":"10px","text-transform":"capitalize"},onClick:o=>e.redirectToAsset(t.row._id)},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows","columns"])}var Z=A(L,[["render",Y]]);const ee=y({name:"DialogNewAsset",setup(){F();const e=u(!1),s=u({}),r=u([]),n=u([]),c=u([]);D(()=>s.value.category,t=>{console.log(t);const o=r.value.filter(m=>m.name===t);c.value=o[0].properties});function i(){try{$.get("./categories").then(t=>{const o=t.data;o.length>0&&(r.value=o,n.value=o.map(m=>m.name))}).catch(t=>{console.log(t)})}catch(t){console.log(t)}}return{dialogState:e,categoriesOptions:n,propertiesOptions:c,inputInfo:s,getAllCategories:i}},methods:{openDialog(){this.dialogState=!0,this.getAllCategories()},closeDialog(){this.dialogState=!1,this.inputInfo={}},addAsset(){console.log(this.inputInfo)}}}),ae=v("div",{class:"text-h5 text-weight-medium"},"Nuevo Producto",-1),te={class:"q-mb-lg"},oe={class:"q-pa-md bg-grey-12 rounded-borders"},le=v("div",{class:"q-pb-xs"},"Selecciona una categoria para comenzar",-1),se={key:0,class:"q-pa-md"};function ne(e,s,r,n,c,i){const t=g("q-title");return d(),w(j,{modelValue:e.dialogState,"onUpdate:modelValue":s[2]||(s[2]=o=>e.dialogState=o),persistent:""},{default:l(()=>[a(G,{class:"q-pa-md",style:{width:"700px","max-width":"80vw","max-height":"80vh"}},{default:l(()=>[a(C,{align:"right",class:"q-py-none"},{default:l(()=>[a(h,{icon:"close",color:"black",flat:"",round:"",onClick:e.closeDialog,class:"q-py-none"},null,8,["onClick"])]),_:1}),a(q,{class:"q-pt-none q-pb-sm"},{default:l(()=>[ae]),_:1}),a(q,null,{default:l(()=>[v("div",te,[a(t,{class:"text-subtitle2 text-weight-regular"},{default:l(()=>[_("Completa los siguientes campos. En caso de que no aplique puede dejar el campo en blanco.")]),_:1})]),v("div",oe,[le,a(P,{clearable:"",dense:"",modelValue:e.inputInfo.category,"onUpdate:modelValue":s[0]||(s[0]=o=>e.inputInfo.category=o),options:e.categoriesOptions,label:"Categoria",class:"q-mb-md"},null,8,["modelValue","options"])]),e.inputInfo.category?(d(),f("div",se,[a(K,{dense:"",modelValue:e.inputInfo.images,"onUpdate:modelValue":s[1]||(s[1]=o=>e.inputInfo.images=o),label:"Imagenes","use-chips":"",multiple:"",class:"q-mb-md",accept:".jpg, image/*",hint:"opcional"},null,8,["modelValue"]),(d(!0),f(U,null,E(e.propertiesOptions,(o,m)=>(d(),f("div",{key:m},[a(J,{clearable:"",dense:"",modelValue:e.inputInfo[o.key],"onUpdate:modelValue":p=>e.inputInfo[o.key]=p,label:o.name,class:"q-mb-md",hint:"requerido",rules:[p=>!!p||"requerido"]},null,8,["modelValue","onUpdate:modelValue","label","rules"])]))),128))])):O("",!0)]),_:1}),a(C,{align:"right"},{default:l(()=>[a(h,{label:"Agregar",size:"0.85rem",color:"primary",dense:"",outline:"",padding:"sm lg",onClick:e.addAsset,style:{"border-radius":"10px","text-transform":"capitalize"}},null,8,["onClick"]),a(h,{label:"Cancelar",size:"0.85rem",flat:"",dense:"",outline:"",onClick:e.closeDialog,padding:"sm lg",style:{"border-radius":"10px","text-transform":"capitalize"}},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var ie=A(ee,[["render",ne]]);const re=y({name:"AssetsPage",components:{PageTitle:z,PrimaryButton:S,FilterBar:T,AssetDetailsTable:Z,DialogNewAsset:ie},setup(){const e=u(!1),s=[{name:"index",label:"#",field:"index"},{name:"category",label:"Categoria",field:"category",align:"left"},{name:"description",label:"Descripcion",field:"description",align:"left"},{name:"manufacturer",label:"Fabricante",field:"manufacturer",align:"left"},{name:"model",label:"Modelo",field:"model",align:"left"},{name:"serial_number",label:"Serial",field:"serial_number",align:"left"},{name:"location",label:"Ubicacion",field:"location",align:"left"},{name:"location_extra_info",label:"",field:"location_extra_info",align:"left"},{name:"current_employee",label:"Empleado",field:"current_employee",align:"left"},{name:"status",label:"Estado",field:"status",align:"left"},{name:"actions",label:"",align:"left"}],r=u([]),n=x();c();function c(){try{$.get("./assets").then(i=>{const t=i.data;t.length>0&&(n.setDataApi(t),r.value=n.getDataApi,console.log(n.getDataApi))}).catch(i=>{console.log(i)})}catch(i){console.log(i)}}return{assetColumns:s,assetRows:r,stateDialogNewAsset:e,dataApiStore:n,getAllAssets:c}},methods:{activateDialogNewAsset(){this.$refs.dialogNewAssetRef.openDialog()}}});function ce(e,s,r,n,c,i){const t=g("PageTitle"),o=g("PrimaryButton"),m=g("DialogNewAsset"),p=g("q-section"),Q=g("FilterBar"),I=g("AssetDetailsTable");return d(),w(N,null,{default:l(()=>[a(p,{class:"flex justify-between q-pa-md"},{default:l(()=>[a(t,{label:"Inventario"}),a(V,{flat:""},{default:l(()=>[a(o,{label:"Agregar Nuevo",icon:"add",class:"q-mx-sm",onClick:e.activateDialogNewAsset},null,8,["onClick"]),a(m,{ref:"dialogNewAssetRef"},null,512),a(o,{flat:"",icon:"more_vert",class:"q-mx-sm"})]),_:1})]),_:1}),a(p,null,{default:l(()=>[a(Q)]),_:1}),a(p,null,{default:l(()=>[a(I,{columns:e.assetColumns,rows:e.assetRows},null,8,["columns","rows"])]),_:1})]),_:1})}var Ae=A(re,[["render",ce]]);export{Ae as default};
