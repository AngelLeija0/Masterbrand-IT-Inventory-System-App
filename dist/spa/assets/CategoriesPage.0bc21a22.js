import{P as $,d as S,f as C}from"./PrimaryButton.ed2de242.js";import{b as k,a as B,Q as F}from"./QPage.90f527e3.js";import{api as w}from"./axios.d5763ff0.js";import{u as M}from"./data-api-store.96a98ce2.js";import{P as Q}from"./PageTitle.9a2d5f9a.js";import{F as x}from"./FilterBar.ccc1d6e5.js";import{D as I}from"./DetailsTable.162e0ec0.js";import{d as q,I as V,r as m,_ as N,G as g,y,z as A,C as s,f as l,Q as _,N as b,E as U,J as v,M as E,F as R}from"./index.d76d729d.js";import{u as z,Q as D}from"./use-quasar.8b1fb4cd.js";import{Q as T}from"./QInput.256b5391.js";import{Q as O}from"./QTable.d3ac5408.js";import{Q as G}from"./QTooltip.e068c045.js";import"./use-dark.dd39b0a6.js";import"./uid.55d387d1.js";import"./QBtnDropdown.f3e529f4.js";import"./QSpinnerDots.a9a067c5.js";const j=q({name:"DialogNewCategory",setup(){const e=V();z();const a=m(!1),r=m({}),f=m([{label:"Descripci\xF3n",key:"description",value:!0},{label:"Fabricante",key:"manufacturer",value:!1},{label:"Modelo",key:"model",value:!1},{label:"Numero serial",key:"serial_number",value:!1},{label:"Lugar de compra",key:"purchase_from",value:!1},{label:"Fecha de compra",key:"purchase_date",value:!1},{label:"Costo",key:"cost",value:!1},{label:"Garantia",key:"warranty_info",value:!1},{label:"Fecha de expiracion de garantia",key:"warranty_expiration_date",value:!1},{label:"Ubicacion",key:"location",value:!1},{label:"Ubicacion (informacion extra)",key:"location_extra_info",value:!1},{label:"Empleado",key:"current_employee",value:!1},{label:"S/O",key:"operating_system",value:!1},{label:"Direccion IP",key:"ip_address",value:!1},{label:"Memoria RAM",key:"ram",value:!1},{label:"Estado de red",key:"network_status",value:!1},{label:"Cantidad",key:"quantity",value:!1},{label:"Ultima cantidad de salida",key:"quantity_last_out",value:!1},{label:"Fecha de ultima cantidad de salida",key:"date_quantity_last_out",value:!1},{label:"Cantidad de ultimo restock",key:"quantity_last_restock",value:!1},{label:"Fecha de ultimo restock",key:"date_last_restock",value:!1}]),u=m({name:[i=>!!i||"* Requerido",i=>i.length<30||"Porfavor usa un maximo de 30 caracteres",i=>!/[!@#$%^&*()_+={}|:\;',.<>?~`]/gi.test(i)||"No se permiten caracteres especiales"]});return{userStore:e,dialogState:a,inputInfo:r,checkBoxProperties:f,inputRulesDictionary:u}},methods:{openDialog(){this.dialogState=!0},closeDialog(){this.dialogState=!1,this.inputInfo={}},addCategory(){const e=this.checkBoxProperties.map(a=>{if(a.value==!0)return{name:a.label,key:a.key}}).filter(a=>a!==void 0);this.inputInfo.properties=e,this.inputInfo.created_at=new Date,w.post("./categories/create",this.inputInfo).then(a=>{a.data?(this.$q.notify({type:"positive",message:"Creado correctamente.",timeout:2e3}),this.dialogState=!1,this.$emit("categoryAdded")):this.$q.notify({type:"negative",message:"Ha ocurrido un error.",timeout:2e3})}).catch(a=>{console.log(a),this.$q.notify({type:"negative",message:"Ha ocurrido un error.",timeout:2e3})}),this.inputInfo={}},validateForm(){const e=[];if(Object.keys(this.inputInfo).length>0)Object.keys(this.inputInfo).map(a=>{const r=this.inputInfo[a];if(r){const f=this.inputRulesDictionary[a];for(const u of f)u(r)!==!0?e.push(!1):e.push(!0)}else return e.push(!1)});else return!1;return!e.includes(!1)}}}),H=b("div",{class:"text-h5 text-weight-medium"},"Nueva Categoria",-1),Y={class:"q-mb-lg"},J={class:"q-mb-lg q-pt-md"},L=b("div",{class:"col-12 q-pt-sm text-weight-medium"},"Nombre",-1),W={class:"row flex justify-between"},K=b("div",{class:"col-12 q-pt-sm text-weight-medium"},"Propiedades",-1),X=b("div",{class:"col-12 text-subtitle2 text-weight-regular q-py-sm"},"Selecciona las propiedades que tendr\xE1 la categoria",-1);function Z(e,a,r,f,u,i){const c=g("q-title");return y(),A(G,{modelValue:e.dialogState,"onUpdate:modelValue":a[1]||(a[1]=o=>e.dialogState=o),persistent:"",transparent:""},{default:s(()=>[l(B,{class:"q-pa-md",style:{width:"700px","max-width":"80vw","max-height":"80vh"}},{default:s(()=>[l(D,{align:"right",class:"q-py-none"},{default:s(()=>[l(_,{icon:"close",color:"black",flat:"",round:"",onClick:e.closeDialog,class:"q-py-none"},null,8,["onClick"])]),_:1}),l(k,{class:"q-pt-none q-pb-sm",style:{"border-bottom":"1px solid #e9e9e9"}},{default:s(()=>[H]),_:1}),l(k,null,{default:s(()=>[b("div",Y,[l(c,{class:"text-subtitle2 text-weight-regular"},{default:s(()=>[U("Completa los siguientes campos para crear una nueva categoria.")]),_:1}),b("div",J,[L,l(T,{clearable:"",dense:"",modelValue:e.inputInfo.name,"onUpdate:modelValue":a[0]||(a[0]=o=>e.inputInfo.name=o),class:"q-mb-md",hint:"requerido",rules:e.inputRulesDictionary.name},null,8,["modelValue","rules"]),b("div",W,[K,X,(y(!0),v(R,null,E(e.checkBoxProperties,(o,p)=>(y(),v("div",{class:"q-ma-sm col-md-5 col-11",key:p},[l(O,{modelValue:o.value,"onUpdate:modelValue":d=>o.value=d,label:o.label,dense:"",disable:o.key==="description"},null,8,["modelValue","onUpdate:modelValue","label","disable"])]))),128))])])])]),_:1}),l(D,{align:"right"},{default:s(()=>[l(_,{label:"Agregar",size:"0.85rem",color:"primary",dense:"",padding:"sm lg",outline:"",style:{"border-radius":"10px","text-transform":"capitalize"},onClick:e.addCategory,disable:!e.validateForm()},null,8,["onClick","disable"]),l(_,{label:"Cancelar",size:"0.85rem",flat:"",dense:"",padding:"sm lg",outline:"",style:{"border-radius":"10px","text-transform":"capitalize"},onClick:e.closeDialog},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var ee=N(j,[["render",Z]]);const ae=q({name:"CategoriesPage",components:{PageTitle:Q,PrimaryButton:$,FilterBar:x,DetailsTable:I,DialogNewCategory:ee},setup(){const e=m(a());function a(){const t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),n=window.innerWidth<768;return t||n}window.addEventListener("resize",()=>{e.value=a()});const r=m(!1),f=[{name:"index",label:"#",field:"index"},{name:"name",label:"Nombre",field:"name",align:"left"},{name:"properties",label:"Propiedades",field:"properties",format:t=>t.map((h,P)=>P<t.length-1?h.name+", ":h.name),align:"left"},{name:"created_at",label:"Fecha de creaci\xF3n",field:"created_at",format:t=>d(t),sortable:!0,sort:(t,n)=>new Date(n)-new Date(t),align:"left"},{name:"updated_at",label:"Ultima fecha de modificaci\xF3n",field:"updated_at",format:t=>t==null?"Sin modificar":d(t),sortable:!0,sort:(t,n)=>new Date(n)-new Date(t),align:"left"},{name:"actions",label:"",align:"left"}],u=m([]),i=M(),c=m(!1);o();function o(){c.value=!0;try{w.get("./categories").then(t=>{const n=t.data;n.length>0?p(n):n.length==0&&(i.clearDataApi(),c.value=!1)}).catch(t=>{console.log(t)})}catch(t){console.log(t)}}function p(t=null){t!==null&&i.setDataApi(t),u.value=i.getDataApi,c.value=!1}function d(t){return S.formatDate(t,"DD/MMMM/YYYY - HH:mm",{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]})}return{isMobile:e,assetColumns:f,categoryRows:u,loadingState:c,stateDialogNewCategory:r,dataApiStore:i,getAllCategories:o,formatDate:d,setCategories:p}},methods:{activateDialogNewCategory(){this.$refs.dialogNewCategoryRef.openDialog()},emitEventUpdateNotifications(){this.$emit("updateNotifications")}}}),te={key:0},le={key:1};function oe(e,a,r,f,u,i){const c=g("PageTitle"),o=g("PrimaryButton"),p=g("DialogNewCategory"),d=g("q-section"),t=g("FilterBar"),n=g("DetailsTable");return y(),A(F,null,{default:s(()=>[l(d,{class:"flex justify-between q-pa-md"},{default:s(()=>[l(c,{label:"Categorias"}),e.isMobile?(y(),v("div",te,[l(C,{flat:""},{default:s(()=>[l(o,{flat:"",icon:"add",class:"q-mx-sm",onClick:e.activateDialogNewCategory},null,8,["onClick"]),l(p,{ref:"dialogNewCategoryRef",onCategoryAdded:a[0]||(a[0]=()=>{e.getAllCategories(),e.emitEventUpdateNotifications()})},null,512),l(o,{flat:"",icon:"more_vert",class:"q-mx-sm"})]),_:1})])):(y(),v("div",le,[l(C,{flat:""},{default:s(()=>[l(o,{label:"Agregar Nueva",icon:"add",class:"q-mx-sm",onClick:e.activateDialogNewCategory},null,8,["onClick"]),l(p,{ref:"dialogNewCategoryRef",onCategoryAdded:a[1]||(a[1]=()=>{e.getAllCategories(),e.emitEventUpdateNotifications()})},null,512),l(o,{flat:"",icon:"more_vert",class:"q-mx-sm"})]),_:1})]))]),_:1}),l(d,null,{default:s(()=>[l(t,{onGetAllData:e.getAllCategories,onRealodData:e.setCategories},null,8,["onGetAllData","onRealodData"])]),_:1}),l(d,null,{default:s(()=>[l(n,{section:"categories",label:"Categorias",columns:e.assetColumns,rows:e.categoryRows,loading:e.loadingState,onElementDeleted:a[2]||(a[2]=()=>{e.getAllCategories(),e.emitEventUpdateNotifications()})},null,8,["columns","rows","loading"])]),_:1})]),_:1})}var Ce=N(ae,[["render",oe]]);export{Ce as default};
