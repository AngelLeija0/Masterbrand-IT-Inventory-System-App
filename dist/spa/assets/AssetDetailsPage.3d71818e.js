import{d as $,B as Q,_ as k,C as f,D as z,Q as I,E as Y,c as b,k as Z,r,w as S,n as x,h as v,a1 as ee,l as te,ap as ne,aB as ie,W as ae,a6 as y,I as m,N as B,f as n,G as U,H as h,aC as K,M as _,F as G,aD as oe,U as V,aE as le,aF as se,aG as de}from"./index.bed9dbaa.js";import{Q as ue}from"./QPage.7a09d445.js";import{api as F}from"./axios.09ba884f.js";import{Q as re}from"./scroll.706ca4d1.js";import{I as pe,J as ce,Q as ge,H as me,F as N,E as fe,G as he,C as ye}from"./QCard.50684bc6.js";const Ie=$({name:"PrimaryButton",setup(){return{router:Q()}},methods:{goBack(){this.$router.go(-1)}}});function ve(e,t,i,d,u,s){return f(),z(I,{flat:"",dense:"",padding:"sm sm sm xs",label:"Regresar",size:"0.75rem",icon:"chevron_left",style:{"border-radius":"10px","text-transform":"capitalize"},onClick:e.goBack},null,8,["onClick"])}var Ee=k(Ie,[["render",ve]]);const be=$({name:"SecondaryNavbarButton",props:{label:{type:String},active:{type:String}}});function Ue(e,t,i,d,u,s){return f(),z(I,{label:e.label,class:"full-width",size:"0.9rem",align:"left",flat:"",padding:"sm md",style:Y({borderLeft:e.active==!0?"5px solid #1565c0":"5px solid #f5f5f5",textTransform:"capitalize",fontWeight:"normal"})},null,8,["label","style"])}var _e=k(be,[["render",Ue]]);const Ve={ratio:[String,Number]};function Se(e,t){return b(()=>{const i=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(i)!==!0&&i>0?{paddingBottom:`${100/i}%`}:null})}const $e=16/9;var P=Z({name:"QImg",props:{...Ve,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:$e},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:i}){const d=r(e.initialRatio),u=Se(e,d);let s=null,a=!1;const p=[r(null),r(D())],l=r(0),c=r(!1),g=r(!1),E=b(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),w=b(()=>({width:e.width,height:e.height})),M=b(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),H=b(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));S(()=>T(),A);function T(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function D(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function A(o){s!==null&&(clearTimeout(s),s=null),g.value=!1,o===null?(c.value=!1,p[l.value^1].value=D()):c.value=!0,p[l.value].value=o}function O({target:o}){a!==!0&&(s!==null&&(clearTimeout(s),s=null),d.value=o.naturalHeight===0?.5:o.naturalWidth/o.naturalHeight,j(o,1))}function j(o,q){a===!0||q===1e3||(o.complete===!0?W(o):s=setTimeout(()=>{s=null,j(o,q+1)},50))}function W(o){a!==!0&&(l.value=l.value^1,p[l.value].value=null,c.value=!1,g.value=!1,i("load",o.currentSrc||o.src))}function J(o){s!==null&&(clearTimeout(s),s=null),c.value=!1,g.value=!0,p[l.value].value=null,p[l.value^1].value=D(),i("error",o)}function L(o){const q=p[o].value,C={key:"img_"+o,class:M.value,style:H.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...q};return l.value===o?(C.class+=" q-img__image--waiting",Object.assign(C,{onLoad:O,onError:J})):C.class+=" q-img__image--loaded",v("div",{class:"q-img__container absolute-full",key:"img"+o},v("img",C))}function X(){return c.value!==!0?v("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},te(t[g.value===!0?"error":"default"])):v("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[v(ne,{color:e.spinnerColor,size:e.spinnerSize})])}return A(T()),x(()=>{a=!0,s!==null&&(clearTimeout(s),s=null)}),()=>{const o=[];return u.value!==null&&o.push(v("div",{key:"filler",style:u.value})),g.value!==!0&&(p[0].value!==null&&o.push(L(0)),p[1].value!==null&&o.push(L(1))),o.push(v(ee,{name:"q-transition--fade"},X)),v("div",{class:E.value,style:w.value,role:"img","aria-label":e.alt},o)}}});function R(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var ke=ie({name:"close-popup",beforeMount(e,{value:t}){const i={depth:R(t),handler(d){i.depth!==0&&setTimeout(()=>{const u=pe(e);u!==void 0&&ce(u,d,i.depth)})},handlerKey(d){ae(d,13)===!0&&i.handler(d)}};e.__qclosepopup=i,e.addEventListener("click",i.handler),e.addEventListener("keyup",i.handlerKey)},updated(e,{value:t,oldValue:i}){t!==i&&(e.__qclosepopup.depth=R(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});const we=$({name:"AssetInput",props:{label:{type:String},modelValue:{type:String},modelKey:{type:String},editing:{type:Boolean}},setup(e){const t=r(e.modelValue),i=r(e.modelKey),d=r(e.editing);return S(()=>e.modelValue,u=>{t.value=u}),S(()=>e.modelKey,u=>{i.value=u}),S(()=>e.editing,u=>{d.value=u}),{localValue:t,keyValue:i,isEditing:d}},methods:{toggleEditing(){this.$emit("update-editing",this.isEditing)},updateValue(){this.$emit("update-input",this.keyValue,this.localValue)}}}),qe={class:"flex justify-between items-center q-py-sm",style:{"border-bottom":"1px solid rgb(239, 239, 239)"}},Ce={class:"q-pr-md text-grey-14",style:{width:"30%"}};function Be(e,t,i,d,u,s){return f(),y("div",qe,[m("div",Ce,B(e.label),1),n(ge,{modelValue:e.localValue,"onUpdate:modelValue":t[0]||(t[0]=a=>e.localValue=a),dense:"",borderless:"",readonly:!e.isEditing,onChange:e.updateValue,"input-style":"font-weight: 500;"},null,8,["modelValue","readonly","onChange"]),n(I,{icon:"edit",flat:"",round:"",size:"12px",color:e.isEditing?"primary":"black",onClick:e.toggleEditing},null,8,["color","onClick"])])}var ze=k(we,[["render",Be]]);const De=$({name:"TechnologyDetails",props:{modelInfo:{type:Object}},components:{AssetInput:ze},data(){return{highlightedImageIndex:-1}},setup(e){const t=Q(),i=r(e.modelInfo),d=r(!1),u=r(!1),s=r();return console.log(i.value),{router:t,inputInfo:i,isEditing:d,isEditingImage:u,inputNewImage:s}},methods:{updateInputInfo(e,t){this.inputInfo[e]=t},updateEditing(e){this.isEditing=!e},saveAssetDetails(){console.log(this.inputInfo)},setNewDefaultImge(e){this.inputInfo.images.default_image=e;const t=this.inputInfo;console.log(t);try{F.patch(`./assets/update/${t._id}`,t).then(i=>{const d=i.data;console.log(d)}).catch(i=>{console.log(i)})}catch(i){console.log(i)}}}}),Ne=e=>(se("data-v-166fd6ed"),e=e(),de(),e),Ke={class:"row"},Qe={class:"col-md-6 col-12 q-px-sm"},Te={class:"row"},Ae={class:"col-md-12 col-12 flex justify-center text-center q-pb-sm items-start"},je={class:"col-md-12 col-12"},Le={class:"col-md-6 col-12 q-px-sm"},Ge={key:0,class:"flex justify-end q-pt-lg"},Pe=Ne(()=>m("div",{class:"text-h6"},"Imagenes",-1)),Re=["onMouseenter","onClick"],Fe={key:0,class:"image-circle-hover"};function Me(e,t,i,d,u,s){var p;const a=U("AssetInput");return f(),y(G,null,[m("div",Ke,[m("div",Qe,[m("div",Te,[m("div",Ae,[n(P,{class:"q-pa-md q-mx-sm",src:(p=e.inputInfo.images)==null?void 0:p.default_image,"spinner-color":"white",style:{height:"140px","max-width":"150px"}},null,8,["src"]),n(I,{icon:"edit",flat:"",round:"",size:"12px",color:e.isEditingImage?"primary":"black",onClick:t[0]||(t[0]=l=>e.isEditingImage=!0)},null,8,["color"])]),m("div",je,[n(a,{label:"Categoria",modelKey:"category",modelValue:e.inputInfo.category,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),n(a,{label:"Descripci\xF3n",modelKey:"description",modelValue:e.inputInfo.description,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),n(a,{label:"Fabricante",modelKey:"manufacturer",modelValue:e.inputInfo.manufacturer,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),n(a,{label:"Modelo",modelKey:"model",modelValue:e.inputInfo.model,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),n(a,{label:"Serial",modelKey:"serial_number",modelValue:e.inputInfo.serial_number,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),n(a,{label:"S/O",modelKey:"operating_system",modelValue:e.inputInfo.operating_system,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),n(a,{label:"RAM",modelKey:"ram",modelValue:e.inputInfo.ram,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"])])])]),m("div",Le,[n(a,{label:"Costo",modelKey:"cost",modelValue:e.inputInfo.cost,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),n(a,{label:"Lugar de compra",modelKey:"purchase_from",modelValue:e.inputInfo.purchase_from,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),n(a,{label:"Fecha de compra",modelKey:"purchase_date",modelValue:e.inputInfo.purchase_date,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),n(a,{label:"Garantia",modelKey:"warranty_info",modelValue:e.inputInfo.warranty_info,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),n(a,{label:"Vencimiento de garantia",modelKey:"warranty_expiration_date",modelValue:e.inputInfo.warranty_expiration_date,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),n(a,{label:"Ubicaci\xF3n",modelKey:"location",modelValue:e.inputInfo.location,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),n(a,{label:"Ubicacion (informaci\xF3n extra)",modelKey:"location_extra_info",modelValue:e.inputInfo.location_extra_info,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),n(a,{label:"Empleado",modelKey:"current_employee",modelValue:e.inputInfo.current_employee,editing:e.isEditing,onUpdateInput:e.updateInputInfo,onUpdateEditing:e.updateEditing},null,8,["modelValue","editing","onUpdateInput","onUpdateEditing"]),e.isEditing?(f(),y("div",Ge,[n(re,{flat:""},{default:h(()=>[n(I,{class:"q-ma-xs",label:"Guardar",color:"primary","icon-right":"save",size:"0.85rem",style:{"text-transform":"capitalize"}}),n(I,{class:"q-ma-xs",label:"Cancelar",flat:"",onClick:t[1]||(t[1]=l=>e.isEditing=!1),size:"0.85rem",style:{"text-transform":"capitalize"}})]),_:1})])):K("",!0)])]),n(ye,{modelValue:e.isEditingImage,"onUpdate:modelValue":t[4]||(t[4]=l=>e.isEditingImage=l)},{default:h(()=>[n(me,{class:"q-pa-md",style:{width:"550px"}},{default:h(()=>[n(N,null,{default:h(()=>[Pe]),_:1}),n(N,{class:"q-pt-none"},{default:h(()=>[_(" Selecciona una imagen ")]),_:1}),n(N,{class:"flex justify-between items-center",style:{"max-height":"400px","overflow-y":"auto"}},{default:h(()=>{var l;return[(f(!0),y(G,null,oe((l=e.inputInfo.images)==null?void 0:l.all,(c,g)=>(f(),y("div",{key:g,style:{cursor:"pointer",position:"relative"},onMouseenter:E=>e.highlightedImageIndex=g,onMouseleave:t[2]||(t[2]=E=>e.highlightedImageIndex=-1),onClick:E=>e.setNewDefaultImge(c)},[n(P,{class:"q-pa-md q-ma-sm",src:c,"spinner-color":"white",style:{height:"120px",width:"140px"}},null,8,["src"]),e.highlightedImageIndex===g?(f(),y("div",Fe)):K("",!0)],40,Re))),128))]}),_:1}),n(fe,null,{default:h(()=>[n(he,{modelValue:e.inputNewImage,"onUpdate:modelValue":t[3]||(t[3]=l=>e.inputNewImage=l),label:"Subir nueva imagen",outlined:"",rounded:"",dense:"",clearable:"",accept:".jpg, image/*",class:"q-mx-md",style:{"text-transform":"none",width:"225px","font-size":"12px",height:"fit-content"}},{prepend:h(()=>[n(V,{name:"cloud_upload"})]),_:1},8,["modelValue"]),n(I,{label:"Guardar",color:"primary",outline:"",rounded:"","icon-right":"save",size:"0.85rem",padding:"sm md",style:{"text-transform":"capitalize"}}),le(n(I,{label:"Cancelar",color:"black",flat:"",rounded:"",size:"0.85rem",padding:"sm md",style:{"text-transform":"capitalize"}},null,512),[[ke]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var He=k(De,[["render",Me],["__scopeId","data-v-166fd6ed"]]);const Oe=$({name:"AssetDetailsPage",components:{GoBackButton:Ee,SecondaryNavbarButton:_e,TechnologyDetails:He},setup(){const e=Q(),t=r(e.params.id),i=r("details"),d=r(!0),u=r(!1),s=r({}),a=r(!1);S(t,(l,c)=>{p(l)});function p(l){try{F.get(`./assets/${l}`).then(c=>{const g=c.data;g&&(s.value=g,a.value=!0,console.log(g))}).catch(c=>{console.log(c)})}catch(c){console.log(c)}}return p(t.value),{router:e,idAsset:t,getAssetDetails:p,assetInfo:s,activeDetails:d,activeActions:u,detailsLoaded:a,actualSection:i}}}),We={class:"col-3 bg-grey-2 flex",style:{"border-radius":"12px","flex-direction":"column"}},Je={class:"q-pa-md"},Xe={class:"flex justify-between"},Ye={class:"text-h6 q-pr-md"},Ze={key:0},xe={key:1},et={key:2},tt={key:3},nt={class:"text-grey-14"},it={class:"q-py-lg"},at={class:"q-pa-md",style:{"margin-top":"auto"}},ot={class:"col-9 q-px-lg",style:{"overflow-y":"auto"}};function lt(e,t,i,d,u,s){const a=U("GoBackButton"),p=U("q-section"),l=U("SecondaryNavbarButton"),c=U("TechnologyDetails");return f(),z(ue,null,{default:h(()=>[n(p,{class:"flex justify-between q-pa-md"},{default:h(()=>[n(a)]),_:1}),n(p,{class:"flex row q-px-md",style:{height:"70vh"}},{default:h(()=>{var g,E,w;return[m("div",We,[m("div",Je,[m("div",Xe,[m("div",Ye,B(e.assetInfo.category)+" "+B(e.assetInfo.model),1),((g=e.assetInfo.status)==null?void 0:g.name)=="Active"?(f(),y("div",Ze,[n(V,{name:"circle",color:"green"}),_(" Activo")])):((E=e.assetInfo.status)==null?void 0:E.name)=="Inactive"?(f(),y("div",xe,[n(V,{name:"circle",color:"orange"}),_(" Inactivo ")])):((w=e.assetInfo.status)==null?void 0:w.name)=="Broken"?(f(),y("div",et,[n(V,{name:"circle",color:"red"}),_(" Roto")])):(f(),y("div",tt,[n(V,{name:"circle",color:"black"}),_(" Sin definir")]))]),m("div",nt,"#"+B(e.assetInfo.serial_number),1)]),m("div",it,[n(l,{label:"Detalles",active:e.activeDetails},null,8,["active"]),n(l,{label:"Acciones",active:e.activeActions},null,8,["active"]),n(l,{label:"Imagenes y Videos",active:!1})]),m("div",at,[n(I,{label:"Borrar",icon:"delete",color:"red",outline:"",class:"full-width"})])]),m("div",ot,[e.detailsLoaded?(f(),z(c,{key:0,modelInfo:e.assetInfo},null,8,["modelInfo"])):K("",!0)])]}),_:1})]),_:1})}var ct=k(Oe,[["render",lt]]);export{ct as default};
