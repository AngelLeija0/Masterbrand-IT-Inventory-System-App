import{_ as w,d as y,r as c,I as v,x as b,G as q,y as f,z as _,C as p,f as a,J as h,N as t,O as u,Q as g,aX as I,aY as x}from"./index.d76d729d.js";import{Q as m}from"./QInput.256b5391.js";import{a as V}from"./QLayout.137efbba.js";import{api as k}from"./axios.d5763ff0.js";import"./use-dark.dd39b0a6.js";import"./uid.55d387d1.js";const $=y({name:"LoginPage",setup(){const e=c(s());function s(){const o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),n=window.innerWidth<768;return o||n}window.addEventListener("resize",()=>{e.value=s()});const r=c({email:null,password:null}),i=v(),l=b(),d=c({email:[o=>!!o||"* Requerido",o=>o.length<30||"Porfavor usa un maximo de 30 caracteres",o=>!/[!#$%^&*()+={}|:\;',<>?~`]/gi.test(o)||"No se permiten caracteres especiales"],password:[o=>!!o||"* Requerido",o=>o.length<30||"Porfavor usa un maximo de 30 caracteres"]});return{isMobile:e,inputInfo:r,router:l,userStore:i,inputRulesDictionary:d}},methods:{validateForm(){if(!this.inputInfo.email||!this.inputInfo.password)return!1;const e=[],s=this.inputRulesDictionary.email;for(const i of s){const l=i(this.inputInfo.email),d=i(this.inputInfo.email);l!==!0&&d!==!0?e.push(!1):e.push(!0)}const r=this.inputRulesDictionary.password;for(const i of r){const l=i(this.inputInfo.password),d=i(this.inputInfo.password);l!==!0&&d!==!0?e.push(!1):e.push(!0)}return!e.includes(!1)},submitLogin(){this.$q.notify({spinner:!0,message:"Por favor, espera un momento",timeout:300});const e=new Promise((s,r)=>{k.post("./auth/login",this.inputInfo).then(i=>s(i)).catch(i=>r(i))});setTimeout(()=>{e.then(s=>{const r=s.data;r?r.id?(this.userStore.setUser(r),console.log(this.userStore.getUser),this.$router.push({name:"home-page"}),this.$q.notify({type:"positive",message:"Ingresaste correctamente.",timeout:1500})):this.$q.notify({type:"negative",message:"Correo o contrase\xF1a incorrecta.",timeout:2e3}):this.$q.notify({type:"negative",message:"Ha ocurrido un error.",timeout:2e3})}).catch(s=>{console.log(s),this.$q.notify({type:"negative",message:"Ha ocurrido un error.",timeout:2e3})})},1500)}}}),C={key:0,class:"bg-white q-pa-md q-ma-md",style:{width:"110vh","border-radius":"15px",display:"flex",padding:"50px 20px"}},R={class:"q-px-md",style:{flex:"1"}},M=t("div",{class:"text-center q-pb-lg"},[t("img",{src:"https://lirp.cdn-website.com/b7aebc32/dms3rep/multi/opt/MBCI_Logo-1920w.png",alt:"",style:{width:"60%"}})],-1),L=t("div",{class:"text-h5 text-weight-medium q-pl-md q-pt-sm q-pb-xs"},"Iniciar sesi\xF3n",-1),P={class:"q-pt-lg"},B=t("span",{class:"q-pl-md"},"Correo electr\xF3nico",-1),U={class:"q-pt-md"},E=t("span",{class:"q-pl-md"},"Contrase\xF1a",-1),Q={class:"q-pt-lg"},D={key:1,class:"bg-white q-px-xl",style:{width:"110vh","border-radius":"15px",display:"flex","padding-top":"80px","padding-bottom":"80px"}},S=t("div",{style:{background:"url('https://images.crunchbase.com/image/upload/c_lpad,f_auto,q_auto:eco,dpr_1/x4g7syngwc8l4ucqzqn1')","background-size":"contain","background-repeat":"no-repeat",width:"100%"}},null,-1),z={class:"q-px-xl",style:{flex:"1"}},N=t("div",{class:"text-h5 text-weight-medium q-pl-md q-py-xs"},"Iniciar sesi\xF3n",-1),F={class:"q-pt-lg"},H=t("span",{class:"q-pl-md"},"Correo electr\xF3nico",-1),O={class:"q-pt-md"},A=t("span",{class:"q-pl-md"},"Contrase\xF1a",-1),K={class:"q-pt-lg"};function G(e,s,r,i,l,d){const o=q("router-view");return f(),_(V,{view:"lHh Lpr lFf",class:"bg-grey-10 flex flex-center",style:{height:"100vh"}},{default:p(()=>[a(o,null,{default:p(()=>[e.isMobile?(f(),h("div",C,[t("div",R,[M,L,t("div",P,[B,a(m,{modelValue:e.inputInfo.email,"onUpdate:modelValue":s[0]||(s[0]=n=>e.inputInfo.email=n),type:"email",rounded:"",outlined:"",dense:""},{prepend:p(()=>[a(u,{name:"person"})]),_:1},8,["modelValue"])]),t("div",U,[E,a(m,{modelValue:e.inputInfo.password,"onUpdate:modelValue":s[1]||(s[1]=n=>e.inputInfo.password=n),type:"password",rounded:"",outlined:"",dense:""},{prepend:p(()=>[a(u,{name:"lock"})]),_:1},8,["modelValue"])]),t("div",Q,[a(g,{label:"Ingresar",color:"dark",rounded:"",class:"full-width",style:{"text-transform":"none",padding:"12px 0"},onClick:s[2]||(s[2]=n=>e.submitLogin())})])])])):(f(),h("div",D,[S,t("div",z,[N,t("div",F,[H,a(m,{modelValue:e.inputInfo.email,"onUpdate:modelValue":s[3]||(s[3]=n=>e.inputInfo.email=n),type:"email",rounded:"",outlined:"",dense:"","hide-bottom-space":"",rules:e.inputRulesDictionary.email,style:{width:"400px","padding-bottom":"0"}},{prepend:p(()=>[a(u,{name:"person"})]),_:1},8,["modelValue","rules"])]),t("div",O,[A,a(m,{modelValue:e.inputInfo.password,"onUpdate:modelValue":s[4]||(s[4]=n=>e.inputInfo.password=n),type:"password",rounded:"",outlined:"",dense:"","hide-bottom-space":"",rules:e.inputRulesDictionary.password,onKeydown:s[5]||(s[5]=I(x(n=>e.submitLogin(),["prevent"]),["enter"])),style:{width:"400px"}},{prepend:p(()=>[a(u,{name:"lock"})]),_:1},8,["modelValue","rules"])]),t("div",K,[a(g,{label:"Ingresar",color:"dark",rounded:"",class:"full-width",style:{"text-transform":"none",padding:"12px 0"},onClick:s[6]||(s[6]=n=>e.submitLogin()),disable:!e.validateForm()},null,8,["disable"])])])]))]),_:1})]),_:1})}var ee=w($,[["render",G]]);export{ee as default};
